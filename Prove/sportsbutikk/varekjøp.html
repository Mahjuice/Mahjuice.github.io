<!DOCTYPE html>
<html lang="nb" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyCMFCwHT3iYMwhK5hCmqiRSXaQgPwDrXlE",
        authDomain: "sportsbutikk-ce6ea.firebaseapp.com",
        databaseURL: "https://sportsbutikk-ce6ea.firebaseio.com",
        projectId: "sportsbutikk-ce6ea",
        storageBucket: "sportsbutikk-ce6ea.appspot.com",
        messagingSenderId: "705858020636"
      };
      firebase.initializeApp(config);
    </script>

  </head>

  <body>

    <header>
      <ul>
        <li><a href="main.html">Hjem</a></li>
        <li><a href="drakter.html">Drakter</a></li>
        <li><a href="sko.html">Sko</a></li>
        <li><a href="baller.html">Baller</a></li>
    </header>

    <main class="varekjop">

    </main>
    <section class="velgstorrelse">
      <h3>Velg Størrelse</h3>
      <select name="velgStørrelse" required>
        <option value="">Velg et alternativ...</option>
        <option value="40">40</option>
        <option value="41">41</option>
        <option value="42">42</option>
        <option value="43">43</option>
        <option value="44">44</option>
        <option value="45">45</option>
        <option value="46">46</option>
      </select>
    </section>
    <section>
      <button class="varekjopbutton button1">Legg til i handlekurv</button>
    </section>
    <footer class="mellomrom">
        <a href="https://www.facebook.com/torshovfotball/" class="fa fa-facebook"></a>
        <a href="https://twitter.com/torshovfotball" class="fa fa-twitter"></a>
        <a href="om_oss.html" class="om_osslink">Om oss</a>
    </footer>

    <script type="text/javascript">
    const main = document.querySelector("main");

    let url_string = window.location.href;
    let url = new URL(url_string);
    let parent = url.searchParams.get("parent");
    let parentParent = url.searchParams.get("parentParent");
    let key = url.searchParams.get("key");

    console.log("Varer/"+parentParent+"/"+parent+"/"+key);

    const db = firebase.database();
    const vareKjop = db.ref("Varer/"+parentParent+"/"+parent+"/"+key);

    vareKjop.on("value",genererHTML);


    function genererHTML(snapshot){

      let parent = snapshot.ref.parent.key;
      let key = snapshot.key;
      let sko = snapshot.val();
      console.log(key,parent);
      console.log(sko);
      let merke;
      if(sko["Merke"]){
        merke = sko["Merke"];
      }
      else{
        merke = parent;
      }
      main.innerHTML +=`
        <section class="valgtvare">
          <div>
            <h3>${sko["Navn"]}</h3>
            <img class="varekjopbilde" src=${sko["ImageURL"]}>
          </div>
          <div class="varekjoptekst">
            <p>${merke}</p>
            <p>${sko.Farge1} - ${sko.Farge2}</p>
            <p>${sko["Pris"]}</p>
            <p class="beskrivelsegrid">${sko["Beskrivelse"]}</p>
          </div>
        </section>
          `;
      }

    </script>
  </body>
</html>
